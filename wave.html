<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The End of Magic: Material Waves Dashboard</title>
    
    <!-- Plotly for charts -->
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Additional custom styles */
        .wave-card {
            transition: transform 0.3s ease;
        }
        .wave-card:hover {
            transform: translateY(-5px);
        }
        .element-tag {
            transition: all 0.2s ease;
        }
        .element-tag:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100">
    <div id="dashboard">
        <!-- Header -->
        <div class="bg-gradient-to-r from-slate-900 to-slate-800 text-white py-12 px-6">
            <div class="max-w-7xl mx-auto">
                <h1 class="text-5xl font-bold mb-4">üß≤ The End of Magic</h1>
                <p class="text-xl text-slate-300 mb-2">
                    Why the Rare-Earth Wave Is the Final Age of Mass-Market Matter
                </p>
                <p class="text-slate-400 italic">
                    Four waves. Three epochs of abundance. One quantum frontier.
                </p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="max-w-7xl mx-auto px-6 py-12">
            
            <!-- Snake Timeline -->
            <div class="relative max-w-4xl mx-auto mb-16">
                <!-- Central timeline line -->
                <div class="absolute left-1/2 transform -translate-x-1/2 w-1 h-full bg-gradient-to-b from-slate-300 to-slate-200 top-0"></div>

                <!-- Wave 1 -->
                <div class="mb-16 md:mb-24 relative px-6 md:pr-8 md:text-right">
                    <!-- Connector dot -->
                    <div class="absolute top-8 md:top-10 left-1/2 transform -translate-x-1/2 md:transform-none md:-right-2.5 w-5 h-5 rounded-full border-4 border-white shadow-lg z-10" style="background-color: #3b82f6"></div>

                    <!-- Content card -->
                    <div class="wave-card bg-white rounded-xl shadow-lg p-6 border" style="border-color: #3b82f6; box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.125), 0 8px 10px -6px rgba(59, 130, 246, 0.125)">
                        <!-- Era badge -->
                        <div class="inline-block mb-4 px-3 py-1 rounded-full text-sm font-bold text-white" style="background-color: #3b82f6">
                            1945-1970
                        </div>

                        <!-- Title & icon -->
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-3">‚öôÔ∏è</span>
                            <h3 class="text-xl font-bold text-slate-800">
                                Wave 1: Age of Conductors
                            </h3>
                        </div>

                        <!-- Elements -->
                        <div class="mb-5">
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">
                                Key Elements (5)
                            </p>
                            <div class="flex flex-wrap gap-2">
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #3b82f6">Si</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #3b82f6">Al</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #3b82f6">Cu</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #3b82f6">Ni</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #3b82f6">Cr</span>
                            </div>
                        </div>

                        <!-- Physics -->
                        <div class="mb-4">
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1">
                                Physics
                            </p>
                            <p class="text-slate-700">Band-gap semiconductors & conductivity</p>
                        </div>

                        <!-- Applications -->
                        <div>
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1">
                                Applications
                            </p>
                            <p class="text-slate-700">Transistors, airframes, motor windings, jet engines</p>
                        </div>
                    </div>
                </div>

                <!-- Wave 2 -->
                <div class="mb-16 md:mb-24 relative px-6 md:pl-8 md:text-left">
                    <!-- Connector dot -->
                    <div class="absolute top-8 md:top-10 left-1/2 transform -translate-x-1/2 md:transform-none md:-left-2.5 w-5 h-5 rounded-full border-4 border-white shadow-lg z-10" style="background-color: #8b5cf6"></div>

                    <!-- Content card -->
                    <div class="wave-card bg-white rounded-xl shadow-lg p-6 border" style="border-color: #8b5cf6; box-shadow: 0 10px 25px -5px rgba(139, 92, 246, 0.125), 0 8px 10px -6px rgba(139, 92, 246, 0.125)">
                        <!-- Era badge -->
                        <div class="inline-block mb-4 px-3 py-1 rounded-full text-sm font-bold text-white" style="background-color: #8b5cf6">
                            1970-2000
                        </div>

                        <!-- Title & icon -->
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-3">üí°</span>
                            <h3 class="text-xl font-bold text-slate-800">
                                Wave 2: Age of Photons & Precision
                            </h3>
                        </div>

                        <!-- Elements -->
                        <div class="mb-5">
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">
                                Key Elements (9)
                            </p>
                            <div class="flex flex-wrap gap-2">
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #8b5cf6">Ga</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #8b5cf6">Ge</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #8b5cf6">In</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #8b5cf6">Nb</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #8b5cf6">Ta</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #8b5cf6">Re</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #8b5cf6">Zr</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #8b5cf6">Sb</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #8b5cf6">Sn</span>
                            </div>
                        </div>

                        <!-- Physics -->
                        <div class="mb-4">
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1">
                                Physics
                            </p>
                            <p class="text-slate-700">Quantum optics & superconductivity</p>
                        </div>

                        <!-- Applications -->
                        <div>
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1">
                                Applications
                            </p>
                            <p class="text-slate-700">LEDs, fiber optics, MRI, EUV lithography</p>
                        </div>
                    </div>
                </div>

                <!-- Wave 3 -->
                <div class="mb-16 md:mb-24 relative px-6 md:pr-8 md:text-right">
                    <!-- Connector dot -->
                    <div class="absolute top-8 md:top-10 left-1/2 transform -translate-x-1/2 md:transform-none md:-right-2.5 w-5 h-5 rounded-full border-4 border-white shadow-lg z-10" style="background-color: #ec4899"></div>

                    <!-- Content card -->
                    <div class="wave-card bg-white rounded-xl shadow-lg p-6 border" style="border-color: #ec4899; box-shadow: 0 10px 25px -5px rgba(236, 72, 153, 0.125), 0 8px 10px -6px rgba(236, 72, 153, 0.125)">
                        <!-- Era badge -->
                        <div class="inline-block mb-4 px-3 py-1 rounded-full text-sm font-bold text-white" style="background-color: #ec4899">
                            2000-2025
                        </div>

                        <!-- Title & icon -->
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-3">üß≤</span>
                            <h3 class="text-xl font-bold text-slate-800">
                                Wave 3: Age of Fields & Fluorescence
                            </h3>
                        </div>

                        <!-- Elements -->
                        <div class="mb-5">
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">
                                Key Elements (6)
                            </p>
                            <div class="flex flex-wrap gap-2">
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ec4899">Nd</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ec4899">Dy</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ec4899">Tb</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ec4899">Eu</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ec4899">Li</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ec4899">Co</span>
                            </div>
                        </div>

                        <!-- Physics -->
                        <div class="mb-4">
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1">
                                Physics
                            </p>
                            <p class="text-slate-700">4f-shell magnetism & ionic storage</p>
                        </div>

                        <!-- Applications -->
                        <div>
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1">
                                Applications
                            </p>
                            <p class="text-slate-700">EV motors, OLEDs, Li-ion batteries</p>
                        </div>
                    </div>
                </div>

                <!-- Wave 4 -->
                <div class="mb-16 md:mb-24 relative px-6 md:pl-8 md:text-left">
                    <!-- Connector dot -->
                    <div class="absolute top-8 md:top-10 left-1/2 transform -translate-x-1/2 md:transform-none md:-left-2.5 w-5 h-5 rounded-full border-4 border-white shadow-lg z-10" style="background-color: #ef4444"></div>

                    <!-- Content card -->
                    <div class="wave-card bg-white rounded-xl shadow-lg p-6 border" style="border-color: #ef4444; box-shadow: 0 10px 25px -5px rgba(239, 68, 68, 0.125), 0 8px 10px -6px rgba(239, 68, 68, 0.125)">
                        <!-- Era badge -->
                        <div class="inline-block mb-4 px-3 py-1 rounded-full text-sm font-bold text-white" style="background-color: #ef4444">
                            2025-2040
                        </div>

                        <!-- Title & icon -->
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-3">‚ò¢Ô∏è</span>
                            <h3 class="text-xl font-bold text-slate-800">
                                Wave 4: Age of Fire & Decay
                            </h3>
                        </div>

                        <!-- Elements -->
                        <div class="mb-5">
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">
                                Key Elements (6)
                            </p>
                            <div class="flex flex-wrap gap-2">
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ef4444">Th</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ef4444">U</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ef4444">Pu</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ef4444">Am</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ef4444">Cm</span>
                                <span class="element-tag px-3 py-1.5 rounded-lg text-sm font-mono font-bold text-white shadow-sm" style="background-color: #ef4444">Ac</span>
                            </div>
                        </div>

                        <!-- Physics -->
                        <div class="mb-4">
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1">
                                Physics
                            </p>
                            <p class="text-slate-700">Fission & decay energy</p>
                        </div>

                        <!-- Applications -->
                        <div>
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1">
                                Applications
                            </p>
                            <p class="text-slate-700">Reactors, RTGs, cancer therapy</p>
                        </div>

                        <!-- Nuclear warning -->
                        <div class="mt-4 p-3 bg-red-50 rounded-lg border border-red-200">
                            <p class="text-xs text-red-700 font-semibold flex items-center">
                                ‚ö†Ô∏è Post-Mass-Market: Measured in grams, not megatons
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Key Insight Banner -->
            <div class="bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-xl p-8 mb-12 shadow-xl">
                <h2 class="text-3xl font-bold mb-4">üîÆ Why Wave 3 Is the Endgame</h2>
                <div class="grid md:grid-cols-2 gap-6 text-lg">
                    <div>
                        <p class="mb-3">
                            <span class="font-semibold">Last stable quantum playground:</span> The 4f-orbitals are the deepest, most complex shells that still interact with light and magnetism.
                        </p>
                        <p>
                            <span class="font-semibold">Closed energy loop:</span> From photons to spins to ions ‚Äî all major degrees of freedom are now engineerable.
                        </p>
                    </div>
                    <div>
                        <p class="mb-3">
                            <span class="font-semibold">Scalable physics:</span> These elements exist in recoverable ores, measurable in kilotons.
                        </p>
                        <p>
                            <span class="font-semibold">The end of mass-market matter:</span> Everything beyond is radioactive, vanishingly rare, or both ‚Äî measured in grams, not megatons.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Material Wave Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div id="bubble-chart"></div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div id="gantt-chart"></div>
                </div>
            </div>

            <!-- Rare Earth Production Section -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-12">
                <h2 class="text-3xl font-bold text-slate-800 mb-6">üìä The Rare-Earth Wave: Production Data</h2>
                
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-6 border-l-4 border-red-500">
                        <div class="text-sm font-semibold text-red-700 uppercase mb-2">China Dominance</div>
                        <div class="text-3xl font-bold text-red-900 mb-1">68%</div>
                        <div class="text-sm text-red-700">of global production (240kt in 2023)</div>
                    </div>
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 border-l-4 border-blue-500">
                        <div class="text-sm font-semibold text-blue-700 uppercase mb-2">U.S. Comeback</div>
                        <div class="text-3xl font-bold text-blue-900 mb-1">43kt</div>
                        <div class="text-sm text-blue-700">in 2023 (from 15.4kt in 2017)</div>
                    </div>
                    <div class="bg-gradient-to-br from-pink-50 to-pink-100 rounded-lg p-6 border-l-4 border-pink-500">
                        <div class="text-sm font-semibold text-pink-700 uppercase mb-2">Global Growth</div>
                        <div class="text-3xl font-bold text-pink-900 mb-1">4.6√ó</div>
                        <div class="text-sm text-pink-700">increase from 75.7kt (1995) to 350kt (2023)</div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div id="production-chart"></div>
                    <div id="total-chart"></div>
                </div>
            </div>

            <!-- Final Quote -->
            <div class="bg-slate-900 text-slate-100 rounded-xl p-8 shadow-xl border-l-4 border-pink-500">
                <p class="text-2xl italic leading-relaxed">
                    "Wave 3 is the endgame of mass-market physics ‚Äî the moment humanity harvested every stable quantum lever before entering the nuclear age. What follows is not another wave, but a <span class="text-pink-400 font-bold">bleed-stream of brilliance measured in grams, not megatons.</span>"
                </p>
            </div>
        </div>

        <!-- Footer -->
        <div class="bg-slate-800 text-slate-400 py-6 px-6 text-center text-sm">
            <p>Modern civilization moves in material waves ‚Äî each defined by a new class of elements unlocking a new kind of physics.</p>
        </div>
    </div>

    <script>
        // Data
        const waves = [
            {
                id: 1,
                name: "Age of Conductors",
                era: "1945-1970",
                color: "#3b82f6",
                elements: ["Si", "Al", "Cu", "Ni", "Cr"],
                physics: "Band-gap semiconductors & conductivity",
                icon: "‚öôÔ∏è",
                uses: "Transistors, airframes, motor windings, jet engines"
            },
            {
                id: 2,
                name: "Age of Photons & Precision",
                era: "1970-2000",
                color: "#8b5cf6",
                elements: ["Ga", "Ge", "In", "Nb", "Ta", "Re", "Zr", "Sb", "Sn"],
                physics: "Quantum optics & superconductivity",
                icon: "üí°",
                uses: "LEDs, fiber optics, MRI, EUV lithography"
            },
            {
                id: 3,
                name: "Age of Fields & Fluorescence",
                era: "2000-2025",
                color: "#ec4899",
                elements: ["Nd", "Dy", "Tb", "Eu", "Li", "Co"],
                physics: "4f-shell magnetism & ionic storage",
                icon: "üß≤",
                uses: "EV motors, OLEDs, Li-ion batteries"
            },
            {
                id: 4,
                name: "Age of Fire & Decay",
                era: "2025-2040",
                color: "#ef4444",
                elements: ["Th", "U", "Pu", "Am", "Cm", "Ac"],
                physics: "Fission & decay energy",
                icon: "‚ò¢Ô∏è",
                uses: "Reactors, RTGs, cancer therapy",
                isNuclear: true
            }
        ];

        const rareEarthData = [
            { year: 1995, china: 48, us: 0, australia: 0.1, brazil: 0.1, rest: 27.5, total: 75.7 },
            { year: 1996, china: 55, us: 0, australia: 0, brazil: 0, rest: 25.6, total: 80.6 },
            { year: 1997, china: 53, us: 0, australia: 0, brazil: 0, rest: 15.3, total: 68.3 },
            { year: 1998, china: 60, us: 0, australia: 0, brazil: 0, rest: 9.1, total: 69.1 },
            { year: 1999, china: 70, us: 0, australia: 0, brazil: 0, rest: 4.4, total: 74.4 },
            { year: 2000, china: 73, us: 0, australia: 0, brazil: 0, rest: 4.2, total: 77.2 },
            { year: 2001, china: 80, us: 0, australia: 0, brazil: 0.6, rest: 5.5, total: 86.1 },
            { year: 2002, china: 88, us: 0, australia: 0, brazil: 0, rest: 4.5, total: 92.5 },
            { year: 2003, china: 92, us: 0, australia: 0, brazil: 0, rest: 3.8, total: 95.8 },
            { year: 2004, china: 98, us: 0, australia: 0.4, brazil: 0, rest: 3.1, total: 101.5 },
            { year: 2005, china: 119, us: 0, australia: 0.5, brazil: 0, rest: 2.4, total: 121.9 },
            { year: 2006, china: 133, us: 0, australia: 0.5, brazil: 0, rest: 3.4, total: 136.9 },
            { year: 2007, china: 120, us: 0, australia: 0.6, brazil: 0, rest: 3.2, total: 123.8 },
            { year: 2008, china: 125, us: 0, australia: 0.5, brazil: 0, rest: 2.6, total: 128.1 },
            { year: 2009, china: 129, us: 0, australia: 0.2, brazil: 0, rest: 5.9, total: 135.1 },
            { year: 2010, china: 89.2, us: 0, australia: 0.1, brazil: 0, rest: 7.7, total: 97 },
            { year: 2011, china: 93.8, us: 0, australia: 2.2, brazil: 0.1, rest: 5.2, total: 101.3 },
            { year: 2012, china: 93.8, us: 0, australia: 3.2, brazil: 1.6, rest: 5.6, total: 104.2 },
            { year: 2013, china: 93.8, us: 5.5, australia: 1.3, brazil: 0.3, rest: 2.1, total: 103 },
            { year: 2014, china: 105, us: 5.4, australia: 6.2, brazil: 0, rest: 6.0, total: 122.6 },
            { year: 2015, china: 105, us: 5.9, australia: 11.9, brazil: 0.9, rest: 5.0, total: 128.6 },
            { year: 2016, china: 105, us: 4.8, australia: 13.9, brazil: 2.7, rest: 5.8, total: 132.2 },
            { year: 2017, china: 105, us: 15.4, australia: 17.3, brazil: 1.7, rest: 5.2, total: 144.6 },
            { year: 2018, china: 120, us: 25.5, australia: 18.6, brazil: 1.2, rest: 25.7, total: 191 },
            { year: 2019, china: 132, us: 26.6, australia: 17.6, brazil: 0.7, rest: 39.0, total: 215.9 },
            { year: 2020, china: 140, us: 39, australia: 21.1, brazil: 0.6, rest: 43.6, total: 244.3 },
            { year: 2021, china: 168, us: 42, australia: 22.5, brazil: 0.5, rest: 53.0, total: 286 },
            { year: 2022, china: 210, us: 42, australia: 16, brazil: 0.1, rest: 28.4, total: 296.5 },
            { year: 2023, china: 240, us: 43, australia: 16.8, brazil: 0.1, rest: 50.1, total: 350 }
        ];

        // Initialize charts when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Bubble Chart
            const bubbleData = waves.slice(0, 3).map(wave => {
                const startYear = parseInt(wave.era.split('-')[0]);
                const endYear = parseInt(wave.era.split('-')[1]);
                const midYear = (startYear + endYear) / 2;
                return {
                    x: [midYear],
                    y: [wave.elements.length],
                    mode: 'markers',
                    name: wave.name,
                    marker: {
                        size: [wave.elements.length * 15],
                        color: wave.color,
                        opacity: 0.7,
                        line: { color: wave.color, width: 2 }
                    },
                    text: [`${wave.icon} ${wave.name}<br>${wave.elements.length} key elements<br>${wave.era}`],
                    hovertemplate: '%{text}<extra></extra>'
                };
            });

            const bubbleLayout = {
                title: { text: 'Material Waves: Elements √ó Time', font: { size: 18, color: '#1f2937' } },
                xaxis: { title: 'Era Midpoint', gridcolor: '#e5e7eb', range: [1940, 2030] },
                yaxis: { title: 'Number of Key Elements', gridcolor: '#e5e7eb' },
                plot_bgcolor: '#f9fafb',
                paper_bgcolor: '#ffffff',
                showlegend: true,
                legend: { x: 0.02, y: 0.98, bgcolor: 'rgba(255,255,255,0.8)', font: { size: 10 } },
                hovermode: 'closest',
                margin: { l: 60, r: 20, t: 60, b: 60 }
            };
            Plotly.newPlot('bubble-chart', bubbleData, bubbleLayout, { responsive: true, displayModeBar: false });

            // Gantt Chart
            const ganttData = waves.map((wave) => {
                const startYear = parseInt(wave.era.split('-')[0]);
                const endYear = parseInt(wave.era.split('-')[1]);
                return {
                    x: [endYear - startYear],
                    y: [wave.name],
                    type: 'bar',
                    orientation: 'h',
                    marker: { color: wave.color, opacity: wave.isNuclear ? 0.4 : 0.8 },
                    text: [wave.era],
                    textposition: 'inside',
                    hovertemplate: `<b>${wave.name}</b><br>${wave.era}<br>${wave.physics}<extra></extra>`,
                    base: [startYear],
                    name: wave.name,
                    showlegend: false
                };
            });

            const ganttLayout = {
                title: { text: 'Timeline of Material Waves', font: { size: 18, color: '#1f2937' } },
                xaxis: { title: 'Year', gridcolor: '#e5e7eb', range: [1940, 2045] },
                yaxis: { autorange: 'reversed', gridcolor: '#e5e7eb' },
                plot_bgcolor: '#f9fafb',
                paper_bgcolor: '#ffffff',
                height: 350,
                margin: { l: 200, r: 20, t: 60, b: 60 }
            };
            Plotly.newPlot('gantt-chart', ganttData, ganttLayout, { responsive: true, displayModeBar: false });

            // Production Chart
            const productionData = [
                { x: rareEarthData.map(d => d.year), y: rareEarthData.map(d => d.china), name: 'China', type: 'scatter', mode: 'lines', fill: 'tonexty', fillcolor: 'rgba(239, 68, 68, 0.3)', line: { color: '#ef4444', width: 2 } },
                { x: rareEarthData.map(d => d.year), y: rareEarthData.map(d => d.us), name: 'United States', type: 'scatter', mode: 'lines', fill: 'tonexty', fillcolor: 'rgba(59, 130, 246, 0.3)', line: { color: '#3b82f6', width: 2 } },
                { x: rareEarthData.map(d => d.year), y: rareEarthData.map(d => d.australia), name: 'Australia', type: 'scatter', mode: 'lines', fill: 'tonexty', fillcolor: 'rgba(234, 179, 8, 0.3)', line: { color: '#eab308', width: 2 } },
                { x: rareEarthData.map(d => d.year), y: rareEarthData.map(d => d.rest), name: 'Rest of World', type: 'scatter', mode: 'lines', fill: 'tonexty', fillcolor: 'rgba(107, 114, 128, 0.3)', line: { color: '#6b7280', width: 2 } }
            ];

            const productionLayout = {
                title: { text: 'Rare Earth Production by Country (1995-2023)', font: { size: 18, color: '#1f2937' } },
                xaxis: { title: 'Year', gridcolor: '#e5e7eb' },
                yaxis: { title: 'Production (kilotonnes)', gridcolor: '#e5e7eb' },
                plot_bgcolor: '#f9fafb',
                paper_bgcolor: '#ffffff',
                showlegend: true,
                legend: { x: 0.02, y: 0.98, bgcolor: 'rgba(255,255,255,0.9)', font: { size: 10 } },
                hovermode: 'x unified',
                height: 400,
                margin: { l: 60, r: 20, t: 60, b: 60 }
            };
            Plotly.newPlot('production-chart', productionData, productionLayout, { responsive: true, displayModeBar: false });

            // Total Growth Chart
            const totalData = [{
                x: rareEarthData.map(d => d.year),
                y: rareEarthData.map(d => d.total),
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Total Production',
                line: { color: '#ec4899', width: 3 },
                marker: { size: 6, color: '#ec4899' }
            }];

            const totalLayout = {
                title: { text: 'Global Rare Earth Production Growth', font: { size: 18, color: '#1f2937' } },
                xaxis: { title: 'Year', gridcolor: '#e5e7eb' },
                yaxis: { title: 'Total Production (kilotonnes)', gridcolor: '#e5e7eb' },
                plot_bgcolor: '#f9fafb',
                paper_bgcolor: '#ffffff',
                showlegend: false,
                height: 400,
                margin: { l: 60, r: 20, t: 60, b: 60 },
                annotations: [{
                    x: 2023, y: 350,
                    text: '350kt in 2023<br>4.6√ó growth since 1995',
                    showarrow: true,
                    arrowhead: 2,
                    ax: -60, ay: -60,
                    font: { size: 12, color: '#ec4899' },
                    bgcolor: 'rgba(255,255,255,0.9)',
                    bordercolor: '#ec4899',
                    borderwidth: 2
                }]
            };
            Plotly.newPlot('total-chart', totalData, totalLayout, { responsive: true, displayModeBar: false });
        });
    </script>
</body>
</html>
