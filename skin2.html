<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skin Cancer Incidence Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e40af',
                        secondary: '#3b82f6',
                        accent: '#f59e0b',
                        dark: '#1e293b',
                        light: '#f8fafc'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="mb-10 text-center">
            <h1 class="text-4xl font-bold text-dark mb-4">Skin Cancer Incidence Dashboard</h1>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Visualizing racial disparities in skin cancer incidence rates across Five Eyes countries
            </p>
        </header>

        <!-- Key Insights Card -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-8">
            <h2 class="text-2xl font-semibold text-dark mb-4">Key Insights</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-primary mb-2">Global Disparity</h3>
                    <p>Whites face 5â€“30x higher risk than other races due to fair skin's UV sensitivity</p>
                </div>
                <div class="bg-amber-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-accent mb-2">Geographic Pattern</h3>
                    <p>Rates peak in sunny/tropical areas (e.g., Queensland, Utah) for whites</p>
                </div>
            </div>
        </div>

        <!-- Main Dashboard -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Country Comparison Chart -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-2xl font-semibold text-dark mb-4">Country Comparison</h2>
                <div id="countryComparison" class="h-96"></div>
            </div>

            <!-- Disparity Ratio Chart -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-2xl font-semibold text-dark mb-4">Disparity Ratios</h2>
                <div id="disparityRatios" class="h-96"></div>
            </div>

            <!-- Regional Breakdown -->
            <div class="bg-white rounded-xl shadow-md p-6 lg:col-span-2">
                <h2 class="text-2xl font-semibold text-dark mb-4">Regional Breakdown</h2>
                <div class="mb-4">
                    <label for="countrySelect" class="block text-sm font-medium text-gray-700 mb-2">Select Country:</label>
                    <select id="countrySelect" class="block w-full md:w-64 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
                        <option value="australia">Australia</option>
                        <option value="canada">Canada</option>
                        <option value="newzealand">New Zealand</option>
                        <option value="uk">United Kingdom</option>
                        <option value="usa">United States</option>
                    </select>
                </div>
                <div id="regionalChart" class="h-96"></div>
            </div>
        </div>

        <!-- Data Source -->
        <div class="mt-8 text-center text-sm text-gray-500">
            <p>Data Sources: Australian Institute of Health and Welfare, Canadian Cancer Society, Ministry of Health New Zealand, Cancer Research UK, US CDC and NCI</p>
        </div>
    </div>

    <script>
        // Data structure
        const data = {
            australia: {
                name: "Australia",
                national: { white: 55, other: 7.5 },
                regions: [
                    { region: "Queensland", white: 65, other: 8 },
                    { region: "Western Australia", white: 55, other: 6 },
                    { region: "New South Wales", white: 50, other: 7 },
                    { region: "Victoria", white: 45, other: 5 },
                    { region: "South Australia", white: 50, other: 6 },
                    { region: "Tasmania", white: 48, other: null },
                    { region: "Northern Territory", white: 40, other: 12 },
                    { region: "Australian Capital Territory", white: 42, other: null }
                ]
            },
            canada: {
                name: "Canada",
                national: { white: 22.5, other: 3.5 },
                regions: [
                    { region: "British Columbia", white: 28, other: 4 },
                    { region: "Ontario", white: 22, other: 3 },
                    { region: "Alberta", white: 25, other: 3 },
                    { region: "Quebec", white: 18, other: 2 },
                    { region: "Nova Scotia", white: 20, other: 3 },
                    { region: "Saskatchewan", white: 23, other: 4 },
                    { region: "Manitoba", white: 21, other: 5 }
                ]
            },
            newzealand: {
                name: "New Zealand",
                national: { white: 50, other: 11 },
                regions: [
                    { region: "Auckland", white: 40, other: 10 },
                    { region: "Canterbury", white: 50, other: 12 },
                    { region: "Otago", white: 55, other: 8 },
                    { region: "Wellington", white: 45, other: 9 },
                    { region: "Waikato", white: 48, other: 15 }
                ]
            },
            uk: {
                name: "United Kingdom",
                national: { white: 17.5, other: 1.5 },
                regions: [
                    { region: "England (South East)", white: 22, other: 2 },
                    { region: "England (overall)", white: 18, other: 2 },
                    { region: "Scotland", white: 16, other: 1 },
                    { region: "Wales", white: 17, other: 2 },
                    { region: "Northern Ireland", white: 15, other: 1 }
                ]
            },
            usa: {
                name: "United States",
                national: { white: 21, other: 2.5 },
                regions: [
                    { region: "Utah", white: 28, other: 3 },
                    { region: "California", white: 22, other: 2 },
                    { region: "Florida", white: 25, other: 4 },
                    { region: "New York", white: 18, other: 1 },
                    { region: "Texas", white: 20, other: 3 },
                    { region: "Washington", white: 24, other: 2 },
                    { region: "Hawaii", white: 15, other: 5 }
                ]
            }
        };

        // Initialize charts
        document.addEventListener('DOMContentLoaded', function() {
            renderCountryComparison();
            renderDisparityRatios();
            renderRegionalChart('australia');
            
            // Add event listener for country selection
            document.getElementById('countrySelect').addEventListener('change', function() {
                renderRegionalChart(this.value);
            });
        });

        // Country Comparison Chart
        function renderCountryComparison() {
            const countries = Object.keys(data);
            const whiteRates = countries.map(country => data[country].national.white);
            const otherRates = countries.map(country => data[country].national.other);
            const countryNames = countries.map(country => data[country].name);

            const trace1 = {
                x: countryNames,
                y: whiteRates,
                name: 'White Population',
                type: 'bar',
                marker: {
                    color: '#3b82f6'
                }
            };

            const trace2 = {
                x: countryNames,
                y: otherRates,
                name: 'Other Races/Ethnicities',
                type: 'bar',
                marker: {
                    color: '#f59e0b'
                }
            };

            const layout = {
                barmode: 'group',
                title: 'National Melanoma Incidence Rates (per 100,000)',
                xaxis: {
                    title: 'Country'
                },
                yaxis: {
                    title: 'Incidence Rate (per 100,000)'
                },
                legend: {
                    orientation: 'h',
                    x: 0,
                    y: -0.2
                }
            };

            Plotly.newPlot('countryComparison', [trace1, trace2], layout, {responsive: true});
        }

        // Disparity Ratios Chart
        function renderDisparityRatios() {
            const countries = Object.keys(data);
            const disparityRatios = countries.map(country => 
                (data[country].national.white / data[country].national.other).toFixed(1)
            );
            const countryNames = countries.map(country => data[country].name);

            const trace = {
                x: countryNames,
                y: disparityRatios,
                type: 'bar',
                marker: {
                    color: '#ef4444'
                }
            };

            const layout = {
                title: 'White vs. Other Races Incidence Ratio',
                xaxis: {
                    title: 'Country'
                },
                yaxis: {
                    title: 'Ratio (White:Other)'
                }
            };

            Plotly.newPlot('disparityRatios', [trace], layout, {responsive: true});
        }

        // Regional Chart
        function renderRegionalChart(country) {
            const countryData = data[country];
            const regions = countryData.regions.map(region => region.region);
            const whiteRates = countryData.regions.map(region => region.white);
            const otherRates = countryData.regions.map(region => region.other);

            const trace1 = {
                x: regions,
                y: whiteRates,
                name: 'White Population',
                type: 'bar',
                marker: {
                    color: '#3b82f6'
                }
            };

            const trace2 = {
                x: regions,
                y: otherRates,
                name: 'Other Races/Ethnicities',
                type: 'bar',
                marker: {
                    color: '#f59e0b'
                }
            };

            const layout = {
                barmode: 'group',
                title: `${countryData.name} - Regional Melanoma Incidence Rates`,
                xaxis: {
                    title: 'Region'
                },
                yaxis: {
                    title: 'Incidence Rate (per 100,000)'
                },
                legend: {
                    orientation: 'h',
                    x: 0,
                    y: -0.3
                }
            };

            Plotly.newPlot('regionalChart', [trace1, trace2], layout, {responsive: true});
        }
    </script>
</body>
</html>
