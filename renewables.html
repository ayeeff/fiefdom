<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Renewable Energy Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="//unpkg.com/globe.gl"></script>
    <style>
        .orbitron { font-family: 'Orbitron', monospace; }
        .speed-card { 
            background: linear-gradient(to bottom right, rgba(31, 41, 55, 0.8), rgba(15, 23, 42, 0.8)); 
            backdrop-filter: blur(10px); 
            border: 1px solid rgba(148, 163, 184, 0.2); 
        }
        @keyframes shimmer { 
            0% { background-position: -200% 0; } 
            100% { background-position: 200% 0; } 
        }
        .shimmer-text { 
            background-size: 200% 100%; 
            animation: shimmer 2s linear infinite; 
        }
        .country-btn { transition: all 0.2s; }
        .country-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4); }
        #globeViz { position: relative; overflow: hidden; }
        #globeViz canvas { max-width: 100% !important; max-height: 600px !important; }
        .energy-tab { 
            transition: all 0.3s; 
            cursor: pointer;
            border: 2px solid transparent;
        }
        .energy-tab.active { 
            border-color: currentColor;
            transform: scale(1.05);
        }
        .energy-tab:hover { transform: translateY(-2px); }
        .modal-item { cursor: pointer; transition: all 0.2s; }
        .modal-item:hover { background: rgba(59, 130, 246, 0.1); }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 to-slate-800 min-h-screen text-white">
    <div class="container mx-auto p-4">
        <div class="mb-6 speed-card p-6 rounded-xl">
            <h1 class="text-4xl md:text-6xl font-black mb-4 text-center orbitron bg-gradient-to-r from-green-400 via-emerald-400 to-teal-400 bg-clip-text text-transparent shimmer-text">
                Global Renewable Energy Potential
            </h1>
            <p class="text-center text-gray-300 text-sm">
                Exploring renewable energy capacity across <span id="totalCountries" class="font-bold text-green-400">30</span> leading countries worldwide
            </p>
        </div>

        <!-- Energy Type Tabs -->
        <div class="mb-6 speed-card p-6 rounded-xl">
            <h2 class="text-2xl font-bold orbitron mb-4 text-cyan-400">Top 20 Countries by Total Renewable Potential</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <div class="energy-tab active bg-gradient-to-br from-purple-600/30 to-pink-600/30 p-4 rounded-xl border-purple-500" onclick="switchEnergyType('total')">
                    <div class="text-center">
                        <div class="text-3xl mb-2">‚ö°</div>
                        <div class="font-bold text-lg">Total</div>
                        <div class="text-sm text-gray-300">All Sources</div>
                    </div>
                </div>
                <div class="energy-tab bg-gradient-to-br from-blue-600/30 to-cyan-600/30 p-4 rounded-xl border-blue-500" onclick="switchEnergyType('wind')">
                    <div class="text-center">
                        <div class="text-3xl mb-2">üí®</div>
                        <div class="font-bold text-lg">Wind</div>
                        <div class="text-sm text-gray-300">Wind Power</div>
                    </div>
                </div>
                <div class="energy-tab bg-gradient-to-br from-yellow-600/30 to-orange-600/30 p-4 rounded-xl border-yellow-500" onclick="switchEnergyType('solar')">
                    <div class="text-center">
                        <div class="text-3xl mb-2">‚òÄÔ∏è</div>
                        <div class="font-bold text-lg">Solar</div>
                        <div class="text-sm text-gray-300">Solar Power</div>
                    </div>
                </div>
                <div class="energy-tab bg-gradient-to-br from-teal-600/30 to-blue-600/30 p-4 rounded-xl border-teal-500" onclick="switchEnergyType('hydro')">
                    <div class="text-center">
                        <div class="text-3xl mb-2">üíß</div>
                        <div class="font-bold text-lg">Hydro</div>
                        <div class="text-sm text-gray-300">Hydropower</div>
                    </div>
                </div>
            </div>
            <div id="top20Grid" class="flex flex-wrap gap-2"></div>
        </div>

        <!-- Globe Visualization -->
        <div class="mb-6 speed-card p-6 rounded-xl">
            <h2 class="text-2xl font-bold orbitron mb-4">
                <span id="mapTitle" class="text-purple-400">Total Renewable Energy Potential</span>
            </h2>
            <div class="flex flex-col lg:flex-row gap-4">
                <div id="globeViz" class="flex-1" style="height: 600px;"></div>
                <div class="lg:w-48 space-y-3">
                    <div class="text-sm font-bold text-gray-300 mb-3" id="legendTitle">Potential (GW)</div>
                    <div class="space-y-2" id="legendContent"></div>
                </div>
            </div>
        </div>

        <!-- Four Columns for Each Energy Type -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
            <div class="speed-card p-6 rounded-xl">
                <h3 class="text-xl font-bold text-yellow-400 mb-4 flex items-center gap-2">
                    <span class="text-2xl">‚òÄÔ∏è</span> Solar Power
                </h3>
                <div id="solarColumn" class="space-y-2 max-h-96 overflow-y-auto"></div>
            </div>
            <div class="speed-card p-6 rounded-xl">
                <h3 class="text-xl font-bold text-blue-400 mb-4 flex items-center gap-2">
                    <span class="text-2xl">üí®</span> Wind Power
                </h3>
                <div id="windColumn" class="space-y-2 max-h-96 overflow-y-auto"></div>
            </div>
            <div class="speed-card p-6 rounded-xl">
                <h3 class="text-xl font-bold text-teal-400 mb-4 flex items-center gap-2">
                    <span class="text-2xl">üíß</span> Hydropower
                </h3>
                <div id="hydroColumn" class="space-y-2 max-h-96 overflow-y-auto"></div>
            </div>
            <div class="speed-card p-6 rounded-xl">
                <h3 class="text-xl font-bold text-purple-400 mb-4 flex items-center gap-2">
                    <span class="text-2xl">‚ö°</span> Total Capacity
                </h3>
                <div id="totalColumn" class="space-y-2 max-h-96 overflow-y-auto"></div>
            </div>
        </div>

        <!-- Modal -->
        <div id="infoModal" class="fixed inset-0 bg-black/70 hidden flex items-center justify-center z-50 p-4" onclick="closeModal()">
            <div class="bg-gradient-to-br from-slate-800 to-slate-900 p-6 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-slate-600/50" onclick="event.stopPropagation()">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h3 id="modalTitle" class="text-3xl font-black orbitron text-white mb-2"></h3>
                        <p id="modalSubtitle" class="text-sm text-gray-400"></p>
                    </div>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                </div>
                <div id="modalContent"></div>
            </div>
        </div>
    </div>

    <script>
        const renewableData = [
            {rank: 1, country: "Russia", solar: 500, wind: 10800, hydro: 320, total: 11620},
            {rank: 2, country: "China", solar: 1600, wind: 2380, hydro: 660, total: 4640},
            {rank: 3, country: "United States", solar: 720, wind: 2000, hydro: 150, total: 2870},
            {rank: 4, country: "Canada", solar: 200, wind: 1500, hydro: 164, total: 1864},
            {rank: 5, country: "Brazil", solar: 300, wind: 1000, hydro: 260, total: 1560},
            {rank: 6, country: "Australia", solar: 2100, wind: 1200, hydro: 10, total: 3310},
            {rank: 7, country: "India", solar: 1100, wind: 550, hydro: 148, total: 1798},
            {rank: 8, country: "Argentina", solar: 1200, wind: 800, hydro: 20, total: 2020},
            {rank: 9, country: "Kazakhstan", solar: 1250, wind: 920, hydro: 5, total: 2175},
            {rank: 10, country: "Democratic Republic of Congo", solar: 400, wind: 200, hydro: 100, total: 700},
            {rank: 11, country: "Indonesia", solar: 600, wind: 300, hydro: 75, total: 975},
            {rank: 12, country: "South Africa", solar: 1000, wind: 600, hydro: 5, total: 1605},
            {rank: 13, country: "Mexico", solar: 800, wind: 400, hydro: 10, total: 1210},
            {rank: 14, country: "Turkey", solar: 200, wind: 450, hydro: 55, total: 705},
            {rank: 15, country: "Iran", solar: 900, wind: 80, hydro: 22, total: 1002},
            {rank: 16, country: "Saudi Arabia", solar: 1900, wind: 90, hydro: 2, total: 1992},
            {rank: 17, country: "Peru", solar: 200, wind: 40, hydro: 70, total: 310},
            {rank: 18, country: "Chile", solar: 300, wind: 500, hydro: 28, total: 828},
            {rank: 19, country: "Mongolia", solar: 500, wind: 700, hydro: 1, total: 1201},
            {rank: 20, country: "Algeria", solar: 2700, wind: 70, hydro: 3, total: 2773},
            {rank: 21, country: "Ethiopia", solar: 800, wind: 100, hydro: 60, total: 960},
            {rank: 22, country: "Pakistan", solar: 950, wind: 150, hydro: 40, total: 1140},
            {rank: 23, country: "Egypt", solar: 1050, wind: 100, hydro: 5, total: 1155},
            {rank: 24, country: "Vietnam", solar: 400, wind: 30, hydro: 45, total: 475},
            {rank: 25, country: "Libya", solar: 1700, wind: 60, hydro: 1, total: 1761},
            {rank: 26, country: "Bolivia", solar: 550, wind: 50, hydro: 30, total: 630},
            {rank: 27, country: "Sudan", solar: 1400, wind: 50, hydro: 4, total: 1454},
            {rank: 28, country: "Morocco", solar: 500, wind: 120, hydro: 2, total: 622},
            {rank: 29, country: "Colombia", solar: 200, wind: 100, hydro: 50, total: 350},
            {rank: 30, country: "Nepal", solar: 100, wind: 50, hydro: 42, total: 192}
        ];

        const countryToCode = {
            'Russia': 'ru', 'China': 'cn', 'United States': 'us', 'Canada': 'ca', 'Brazil': 'br',
            'Australia': 'au', 'India': 'in', 'Argentina': 'ar', 'Kazakhstan': 'kz',
            'Democratic Republic of Congo': 'cd', 'Indonesia': 'id', 'South Africa': 'za',
            'Mexico': 'mx', 'Turkey': 'tr', 'Iran': 'ir', 'Saudi Arabia': 'sa', 'Peru': 'pe',
            'Chile': 'cl', 'Mongolia': 'mn', 'Algeria': 'dz', 'Ethiopia': 'et', 'Pakistan': 'pk',
            'Egypt': 'eg', 'Vietnam': 'vn', 'Libya': 'ly', 'Bolivia': 'bo', 'Sudan': 'sd',
            'Morocco': 'ma', 'Colombia': 'co', 'Nepal': 'np'
        };

        let globe;
        let currentEnergyType = 'total';

        const energyConfig = {
            total: {
                title: 'Total Renewable Energy Potential',
                color: 'purple',
                icon: '‚ö°',
                colors: ['rgba(236, 72, 153, 0.9)', 'rgba(217, 70, 239, 0.9)', 'rgba(139, 92, 246, 0.9)', 'rgba(59, 130, 246, 0.9)', 'rgba(51, 65, 85, 0.9)']
            },
            wind: {
                title: 'Wind Power Potential',
                color: 'blue',
                icon: 'üí®',
                colors: ['rgba(6, 182, 212, 0.9)', 'rgba(14, 165, 233, 0.9)', 'rgba(59, 130, 246, 0.9)', 'rgba(99, 102, 241, 0.9)', 'rgba(51, 65, 85, 0.9)']
            },
            solar: {
                title: 'Solar Power Potential',
                color: 'yellow',
                icon: '‚òÄÔ∏è',
                colors: ['rgba(251, 191, 36, 0.9)', 'rgba(245, 158, 11, 0.9)', 'rgba(249, 115, 22, 0.9)', 'rgba(234, 88, 12, 0.9)', 'rgba(51, 65, 85, 0.9)']
            },
            hydro: {
                title: 'Hydropower Potential',
                color: 'teal',
                icon: 'üíß',
                colors: ['rgba(20, 184, 166, 0.9)', 'rgba(6, 182, 212, 0.9)', 'rgba(14, 165, 233, 0.9)', 'rgba(59, 130, 246, 0.9)', 'rgba(51, 65, 85, 0.9)']
            }
        };

        function switchEnergyType(type) {
            currentEnergyType = type;
            document.querySelectorAll('.energy-tab').forEach(tab => tab.classList.remove('active'));
            event.target.closest('.energy-tab').classList.add('active');
            
            document.getElementById('mapTitle').textContent = energyConfig[type].title;
            document.getElementById('mapTitle').className = `text-${energyConfig[type].color}-400`;
            
            renderTop20();
            updateGlobe();
        }

        function renderTop20() {
            const sorted = [...renewableData].sort((a, b) => b[currentEnergyType] - a[currentEnergyType]).slice(0, 20);
            const grid = document.getElementById('top20Grid');
            
            grid.innerHTML = sorted.map((country, idx) => {
                const code = countryToCode[country.country] || 'un';
                const value = country[currentEnergyType].toLocaleString();
                const rankClass = idx < 3 ? `border-2 ${idx === 0 ? 'border-yellow-400' : idx === 1 ? 'border-gray-300' : 'border-orange-400'}` : 'border border-slate-600';
                
                return `<button onclick="showCountryModal('${country.country}')" class="country-btn px-3 py-2 rounded-lg bg-slate-700/40 hover:bg-slate-700/60 ${rankClass} transition-all">
                    <img src="https://flagcdn.com/w80/${code}.png" alt="${code}" class="w-5 h-4 inline-block mr-2 rounded">
                    <span class="font-mono font-bold text-white uppercase">${code}</span>
                    <span class="ml-2 text-${energyConfig[currentEnergyType].color}-400 font-bold">${value}</span>
                    <span class="ml-1 text-xs text-gray-400">GW</span>
                    <span class="ml-1 text-xs opacity-75">#${idx + 1}</span>
                </button>`;
            }).join('');
        }

        function renderColumns() {
            ['solar', 'wind', 'hydro', 'total'].forEach(type => {
                const sorted = [...renewableData].sort((a, b) => b[type] - a[type]);
                const column = document.getElementById(`${type}Column`);
                
                column.innerHTML = sorted.map((country, idx) => {
                    const code = countryToCode[country.country] || 'un';
                    const value = country[type].toLocaleString();
                    
                    return `<button onclick="showCountryModal('${country.country}')" class="country-btn w-full px-3 py-2 rounded-lg bg-slate-700/30 hover:bg-slate-700/50 border border-slate-600/30 transition-all text-left">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <span class="text-gray-400 font-bold text-xs w-6">#${idx + 1}</span>
                                <img src="https://flagcdn.com/w80/${code}.png" alt="${code}" class="w-5 h-4 rounded">
                                <span class="font-mono text-xs text-white uppercase">${code}</span>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-bold text-${energyConfig[type].color}-400">${value}</div>
                                <div class="text-xs text-gray-400">GW</div>
                            </div>
                        </div>
                    </button>`;
                }).join('');
            });
        }

        function updateGlobe() {
            if (!globe) return;
            
            const countryData = {};
            renewableData.forEach(item => {
                countryData[item.country] = item[currentEnergyType];
            });
            
            const values = renewableData.map(d => d[currentEnergyType]);
            const maxValue = Math.max(...values);
            
            const getColor = (value) => {
                if (!value) return 'rgba(30, 41, 55, 0.8)';
                const ratio = value / maxValue;
                const colors = energyConfig[currentEnergyType].colors;
                if (ratio > 0.8) return colors[0];
                if (ratio > 0.6) return colors[1];
                if (ratio > 0.4) return colors[2];
                if (ratio > 0.2) return colors[3];
                return colors[4];
            };
            
            updateLegend(maxValue);
            
            fetch('https://raw.githubusercontent.com/vasturiano/globe.gl/master/example/datasets/ne_110m_admin_0_countries.geojson')
                .then(res => res.json())
                .then(landPolygons => {
                    const normalizeCountryName = (name) => {
                        if (name === 'United States of America') return 'United States';
                        if (name === 'Democratic Republic of the Congo') return 'Democratic Republic of Congo';
                        return name;
                    };
                    
                    globe.polygonsData(landPolygons.features.filter(d => d.properties.ISO_A2 !== 'AQ'))
                        .polygonAltitude(d => {
                            const name = normalizeCountryName(d.properties.ADMIN || d.properties.NAME);
                            return countryData[name] ? 0.01 : 0.001;
                        })
                        .polygonCapColor(d => {
                            const name = normalizeCountryName(d.properties.ADMIN || d.properties.NAME);
                            return getColor(countryData[name]);
                        })
                        .polygonLabel(d => {
                            const name = normalizeCountryName(d.properties.ADMIN || d.properties.NAME);
                            const value = countryData[name];
                            if (value) {
                                return `<div class="bg-slate-900/95 px-3 py-2 rounded-lg border border-slate-600">
                                    <div class="font-bold text-white">${name}</div>
                                    <div class="text-sm text-${energyConfig[currentEnergyType].color}-400">${value.toLocaleString()} GW ${energyConfig[currentEnergyType].icon}</div>
                                </div>`;
                            }
                            return `<div class="bg-slate-900/95 px-3 py-2 rounded-lg border border-slate-600"><div class="font-bold text-white">${name}</div></div>`;
                        })
                        .onPolygonClick(d => {
                            const name = normalizeCountryName(d.properties.ADMIN || d.properties.NAME);
                            if (countryData[name]) {
                                showCountryModal(name);
                            }
                        });
                });
        }

        function updateLegend(maxValue) {
            const legend = document.getElementById('legendContent');
            const config = energyConfig[currentEnergyType];
            const ranges = [
                { label: `Very High (${Math.round(maxValue * 0.8)}+ GW)`, color: config.colors[0] },
                { label: `High (${Math.round(maxValue * 0.6)}-${Math.round(maxValue * 0.8)} GW)`, color: config.colors[1] },
                { label: `Medium (${Math.round(maxValue * 0.4)}-${Math.round(maxValue * 0.6)} GW)`, color: config.colors[2] },
                { label: `Low (${Math.round(maxValue * 0.2)}-${Math.round(maxValue * 0.4)} GW)`, color: config.colors[3] },
                { label: `Very Low (0-${Math.round(maxValue * 0.2)} GW)`, color: config.colors[4] }
            ];
            
            legend.innerHTML = ranges.map(range => `
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 rounded" style="background: ${range.color};"></div>
                    <span class="text-xs text-gray-300">${range.label}</span>
                </div>
            `).join('');
        }

        function initGlobe() {
            const container = document.getElementById('globeViz');
            globe = Globe()(container)
                .width(container.offsetWidth)
                .height(600)
                .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg')
                .backgroundImageUrl('//unpkg.com/three-globe/example/img/night-sky.png')
                .polygonSideColor(() => 'rgba(0, 0, 0, 0.1)')
                .polygonStrokeColor(() => '#475569')
                .polygonsTransitionDuration(300);
            
            globe.controls().autoRotate = true;
            globe.controls().autoRotateSpeed = 1.5;
            globe.pointOfView({ altitude: 1 });
            
            window.addEventListener('resize', () => {
                globe.width(container.offsetWidth);
            });
            
            updateGlobe();
        }

        function showCountryModal(countryName) {
            const country = renewableData.find(c => c.country === countryName);
            if (!country) return;
            
            const code = countryToCode[country.country] || 'un';
            
            document.getElementById('modalTitle').innerHTML = `
                <img src="https://flagcdn.com/w80/${code}.png" alt="${code}" class="w-8 h-6 inline-block mr-3 rounded">
                ${country.country}
            `;
            document.getElementById('modalSubtitle').textContent = `Rank #${country.rank} ‚Ä¢ Total Capacity: ${country.total.toLocaleString()} GW`;
            
            const content = `
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-gradient-to-br from-yellow-600/20 to-orange-600/20 p-6 rounded-xl border border-yellow-500/30">
                        <div class="text-4xl mb-2">‚òÄÔ∏è</div>
                        <div class="text-sm text-gray-400 mb-1">Solar Power</div>
                        <div class="text-3xl font-black orbitron text-yellow-400">${country.solar.toLocaleString()}</div>
                        <div class="text-xs text-gray-400 mt-1">GW</div>
                    </div>
                    <div class="bg-gradient-to-br from-blue-600/20 to-cyan-600/20 p-6 rounded-xl border border-blue-500/30">
                        <div class="text-4xl mb-2">üí®</div>
                        <div class="text-sm text-gray-400 mb-1">Wind Power</div>
                        <div class="text-3xl font-black orbitron text-blue-400">${country.wind.toLocaleString()}</div>
                        <div class="text-xs text-gray-400 mt-1">GW</div>
                    </div>
                    <div class="bg-gradient-to-br from-teal-600/20 to-blue-600/20 p-6 rounded-xl border border-teal-500/30">
                        <div class="text-4xl mb-2">üíß</div>
                        <div class="text-sm text-gray-400 mb-1">Hydropower</div>
                        <div class="text-3xl font-black orbitron text-teal-400">${country.hydro.toLocaleString()}</div>
                        <div class="text-xs text-gray-400 mt-1">GW</div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-600/20 to-pink-600/20 p-6 rounded-xl border border-purple-500/30">
                        <div class="text-4xl mb-2">‚ö°</div>
                        <div class="text-sm text-gray-400 mb-1">Total Capacity</div>
                        <div class="text-3xl font-black orbitron text-purple-400">${country.total.toLocaleString()}</div>
                        <div class="text-xs text-gray-400 mt-1">GW</div>
                    </div>
                </div>
                <div class="mt-6 p-4 bg-slate-700/30 rounded-xl">
                    <div class="text-sm text-gray-300">
                        <strong>Energy Mix:</strong><br>
                        Solar: ${((country.solar / country.total) * 100).toFixed(1)}% ‚Ä¢ 
                        Wind: ${((country.wind / country.total) * 100).toFixed(1)}% ‚Ä¢ 
                        Hydro: ${((country.hydro / country.total) * 100).toFixed(1)}%
                    </div>
                </div>
            `;
            
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('infoModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('infoModal').classList.add('hidden');
        }

        // Initialize
        renderTop20();
        renderColumns();
        initGlobe();
    </script>
</body>
</html>
