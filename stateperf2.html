<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Australia: Population, Housing & Economic Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style>
    .map-container { height: 500px; border-radius: 0.5rem; }
    .map-legend { background: white; padding: 10px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); font-size: 12px; line-height: 1.5; }
    .legend-item { display: flex; align-items: center; margin-bottom: 4px; }
    .legend-color { width: 15px; height: 15px; margin-right: 8px; opacity: 0.8; border: 1px solid #ccc; }
</style>
</head>
<body class="bg-gray-50">
<div class="container mx-auto px-4 py-8">
    
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">Australia Strategic Dashboard (2000-2025)</h1>
        <p class="text-gray-600">Tracking the divergence between Population, Economy, and Housing Markets.</p>
    </div>

    <div class="mb-12">
        <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
            <span class="bg-blue-100 text-blue-800 text-sm font-semibold mr-3 px-2.5 py-0.5 rounded">1. Population</span>
            Growth Since 2000
        </h2>
        
        <div class="grid md:grid-cols-2 gap-6 mb-6">
            <div class="bg-blue-50 border-l-4 border-blue-500 text-blue-900 p-4 rounded-lg h-fit">
                <h2 class="text-xl font-bold mb-3">üë• Population Key Findings</h2>
                <p class="mb-2">Since 2000, Australia's population has surged, but growth is uneven:</p>
                <ul class="list-disc list-inside space-y-1 ml-4 text-gray-800">
                    <li><span class="font-semibold">Western Australia (WA):</span> The fastest growing state since 2000, expanding by <span class="font-bold">57%</span> due to successive mining booms.</li>
                    <li><span class="font-semibold">Queensland (QLD):</span> Close behind with <span class="font-bold">55%</span> growth, driven by internal migration from southern states.</li>
                    <li><span class="font-semibold">Victoria (VIC):</span> Added the most people in absolute terms, growing <span class="font-bold">47%</span> despite recent pandemic outflows.</li>
                    <li><span class="font-semibold">Tasmania (TAS):</span> The slowest growing jurisdiction at <span class="font-bold">22%</span>, reflecting an older demographic profile.</li>
                </ul>
            </div>
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold text-gray-700 mb-2">Population Growth % (2000-2025)</h3>
                <div id="popChart"></div>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-semibold text-gray-700 mb-4">Population Growth Heatmap</h3>
            <div id="popMap" class="map-container"></div>
        </div>
    </div>

    <div class="mb-12">
        <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
            <span class="bg-red-100 text-red-800 text-sm font-semibold mr-3 px-2.5 py-0.5 rounded">2. Housing</span>
            Price Growth Since 2000
        </h2>
        
        <div class="grid md:grid-cols-2 gap-6 mb-6">
            <div class="bg-red-50 border-l-4 border-red-500 text-red-900 p-4 rounded-lg h-fit">
                <h2 class="text-xl font-bold mb-3">üè† Housing Key Findings</h2>
                <p class="mb-2">House prices have decoupled from standard economic metrics:</p>
                <ul class="list-disc list-inside space-y-1 ml-4 text-gray-800">
                    <li><span class="font-semibold">Adelaide (SA) & Brisbane (QLD):</span> Massive recent surges have pushed 25-year growth over <span class="font-bold">500%</span>.</li>
                    <li><span class="font-semibold">Hobart (TAS):</span> Despite the slowest population growth (22%), prices exploded by <span class="font-bold">530%</span>, driven by low supply and a "tree-change" boom.</li>
                    <li><span class="font-semibold">Sydney (NSW):</span> Prices grew <span class="font-bold">460%</span> while the state economy only grew 65%, creating a severe affordability crisis.</li>
                </ul>
            </div>
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold text-gray-700 mb-2">House Price Growth % (2000-2025)</h3>
                <div id="housingChart"></div>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-semibold text-gray-700 mb-4">House Price Growth Heatmap</h3>
            <div id="housingMap" class="map-container"></div>
        </div>
    </div>

    <div class="mb-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
            <span class="bg-purple-100 text-purple-800 text-sm font-semibold mr-3 px-2.5 py-0.5 rounded">3. The "Apples to Oranges" Comparison</span>
            Economy vs. Asset Prices
        </h2>
        
        <div class="grid md:grid-cols-3 gap-6 mb-6">
            <div class="md:col-span-1 bg-purple-50 border-l-4 border-purple-500 text-purple-900 p-4 rounded-lg">
                <h2 class="text-xl font-bold mb-3">‚öñÔ∏è The Great Decoupling</h2>
                <p class="mb-4">This chart compares the growth of the <strong>Real Economy (GSP)</strong> against the growth of <strong>House Prices</strong>.</p>
                <div class="space-y-3">
                    <div class="p-3 bg-white bg-opacity-60 rounded">
                        <span class="block font-bold text-sm uppercase text-green-800 mb-1">Economic Reality</span>
                        <p class="text-sm">Most state economies (GSP) have grown between <span class="font-bold">65% - 150%</span> since 2000.</p>
                    </div>
                    <div class="p-3 bg-white bg-opacity-60 rounded">
                        <span class="block font-bold text-sm uppercase text-red-800 mb-1">Asset Reality</span>
                        <p class="text-sm">House prices in the same period have grown between <span class="font-bold">400% - 550%</span>.</p>
                    </div>
                    <p class="text-sm italic mt-2">In almost every state, house prices have grown <span class="font-bold">3x to 5x faster</span> than the actual economy.</p>
                </div>
            </div>
            <div class="md:col-span-2 bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold text-gray-700 mb-2">Apples to Oranges: GSP Growth vs. House Price Growth</h3>
                <div id="comparisonChart"></div>
            </div>
        </div>
    </div>

</div>

<script>
window.addEventListener('load', function() {
    // ================= DATA SOURCES =================
    // 1. POPULATION DATA (2000 vs 2024 ABS ERP)
    const popData = {
        'ACT': { growth: 51, color: '#1e40af' }, // ~315k to 474k
        'Queensland': { growth: 55, color: '#1d4ed8' }, // ~3.6m to 5.58m
        'Western Australia': { growth: 57, color: '#2563eb' }, // ~1.88m to 2.96m
        'Victoria': { growth: 47, color: '#3b82f6' }, // ~4.76m to 6.98m
        'South Australia': { growth: 25, color: '#60a5fa' }, // ~1.5m to 1.88m
        'Tasmania': { growth: 22, color: '#93c5fd' }, // ~470k to 575k
        'Northern Territory': { growth: 30, color: '#bfdbfe' }, // ~196k to 255k
        'NSW': { growth: 31, color: '#bfdbfe' } // ~6.46m to 8.48m
    };

    // 2. HOUSING DATA (Approx % Growth 2000-2025)
    const housingData = {
        'ACT': { growth: 440, color: '#991b1b' },
        'Queensland': { growth: 520, color: '#7f1d1d' },
        'Western Australia': { growth: 470, color: '#991b1b' },
        'Victoria': { growth: 430, color: '#b91c1c' },
        'South Australia': { growth: 550, color: '#7f1d1d' }, 
        'Tasmania': { growth: 530, color: '#7f1d1d' },
        'Northern Territory': { growth: 190, color: '#f87171' },
        'NSW': { growth: 460, color: '#991b1b' }
    };

    // 3. GSP DATA (For Comparison Only - Visuals Removed)
    const gspData = {
        'ACT': 156, 'Queensland': 125, 'Western Australia': 150,
        'Victoria': 90, 'South Australia': 85, 'Tasmania': 80,
        'Northern Territory': 75, 'NSW': 65
    };

    const stateNameMapping = {
        'Australian Capital Territory': 'ACT', 'New South Wales': 'NSW',
        'Northern Territory': 'Northern Territory', 'Queensland': 'Queensland',
        'South Australia': 'South Australia', 'Tasmania': 'Tasmania',
        'Victoria': 'Victoria', 'Western Australia': 'Western Australia'
    };

    // ================= HELPER FUNCTIONS =================
    // Blue Scale for Population
    function getPopColor(d) {
        return d > 55 ? '#1e40af' : d > 50 ? '#1d4ed8' : d > 40 ? '#3b82f6' : d > 30 ? '#60a5fa' : '#93c5fd';
    }
    // Red Heat Scale for Housing
    function getHousingColor(d) {
        return d > 500 ? '#7f1d1d' : d > 450 ? '#991b1b' : d > 400 ? '#b91c1c' : d > 300 ? '#ef4444' : '#f87171';
    }

    // ================= FETCH GEOJSON =================
    fetch('https://raw.githubusercontent.com/tonywr71/GeoJson-Data/master/australian-states.json')
        .then(response => response.json())
        .then(geojsonData => {
            
            // --- 1. POPULATION MAP (Blue) ---
            const popMap = L.map('popMap', { zoomControl: false }).setView([-27, 125], 4);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '¬© OpenStreetMap' }).addTo(popMap);
            
            L.geoJSON(geojsonData, {
                style: function(feature) {
                    const name = stateNameMapping[feature.properties.STATE_NAME] || feature.properties.STATE_NAME;
                    const data = popData[name];
                    return { fillColor: data ? getPopColor(data.growth) : '#ccc', weight: 1.5, opacity: 1, color: 'white', fillOpacity: 0.7 };
                },
                onEachFeature: function(feature, layer) {
                    const name = stateNameMapping[feature.properties.STATE_NAME] || feature.properties.STATE_NAME;
                    const data = popData[name];
                    if (data) layer.bindPopup(`<strong>${name}</strong><br>Pop Growth (2000-25): <strong>${data.growth}%</strong>`);
                }
            }).addTo(popMap);

            // Pop Legend
            const popLegend = L.control({position: 'topleft'});
            popLegend.onAdd = function() {
                const div = L.DomUtil.create('div', 'map-legend');
                const grades = [20, 30, 40, 50, 55];
                div.innerHTML = '<strong>Pop Growth %</strong><br>';
                for (let i = 0; i < grades.length; i++) {
                    div.innerHTML += `<div class="legend-item"><i class="legend-color" style="background:${getPopColor(grades[i] + 1)}"></i> >${grades[i]}%</div>`;
                }
                return div;
            };
            popLegend.addTo(popMap);

            // --- 2. HOUSING MAP (Red) ---
            const housingMap = L.map('housingMap', { zoomControl: false }).setView([-27, 125], 4);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '¬© OpenStreetMap' }).addTo(housingMap);

            L.geoJSON(geojsonData, {
                style: function(feature) {
                    const name = stateNameMapping[feature.properties.STATE_NAME] || feature.properties.STATE_NAME;
                    const data = housingData[name];
                    return { fillColor: data ? getHousingColor(data.growth) : '#ccc', weight: 1.5, opacity: 1, color: 'white', fillOpacity: 0.7 };
                },
                onEachFeature: function(feature, layer) {
                    const name = stateNameMapping[feature.properties.STATE_NAME] || feature.properties.STATE_NAME;
                    const data = housingData[name];
                    if (data) layer.bindPopup(`<strong>${name}</strong><br>House Price Growth: <strong>${data.growth}%</strong>`);
                }
            }).addTo(housingMap);

            // Housing Legend
            const housingLegend = L.control({position: 'topleft'});
            housingLegend.onAdd = function() {
                const div = L.DomUtil.create('div', 'map-legend');
                const grades = [190, 300, 400, 450, 500];
                div.innerHTML = '<strong>Price Growth %</strong><br>';
                for (let i = 0; i < grades.length; i++) {
                    div.innerHTML += `<div class="legend-item"><i class="legend-color" style="background:${getHousingColor(grades[i] + 1)}"></i> >${grades[i]}%</div>`;
                }
                return div;
            };
            housingLegend.addTo(housingMap);

        }).catch(error => console.error('Error loading GeoJSON:', error));

    // ================= CHARTS =================
    
    // 1. Population Chart (Sorted)
    const popKeys = Object.keys(popData).sort((a, b) => popData[b].growth - popData[a].growth);
    Plotly.newPlot('popChart', [{
        x: popKeys,
        y: popKeys.map(k => popData[k].growth),
        type: 'bar',
        marker: { color: popKeys.map(k => popData[k].color) },
        text: popKeys.map(k => popData[k].growth + '%'),
        textposition: 'auto'
    }], { margin: { t: 10, b: 40, l: 40, r: 10 }, height: 250, xaxis: {tickangle: -45} }, {responsive: true});

    // 2. Housing Chart (Sorted)
    const housingKeys = Object.keys(housingData).sort((a, b) => housingData[b].growth - housingData[a].growth);
    Plotly.newPlot('housingChart', [{
        x: housingKeys,
        y: housingKeys.map(k => housingData[k].growth),
        type: 'bar',
        marker: { color: housingKeys.map(k => housingData[k].color) },
        text: housingKeys.map(k => housingData[k].growth + '%'),
        textposition: 'auto'
    }], { margin: { t: 10, b: 40, l: 40, r: 10 }, height: 250, xaxis: {tickangle: -45} }, {responsive: true});

    // 3. COMPARISON CHART (Apples to Oranges)
    // Sort by Housing Growth Gap
    const compKeys = Object.keys(housingData).sort((a, b) => housingData[b].growth - housingData[a].growth);
    
    const traceGSP = {
        x: compKeys,
        y: compKeys.map(k => gspData[k]),
        name: 'Economy (GSP) Growth',
        type: 'bar',
        marker: { color: '#16a34a' } // Green
    };

    const traceHousing = {
        x: compKeys,
        y: compKeys.map(k => housingData[k].growth),
        name: 'House Price Growth',
        type: 'bar',
        marker: { color: '#dc2626' } // Red
    };

    Plotly.newPlot('comparisonChart', [traceGSP, traceHousing], {
        barmode: 'group',
        margin: { t: 20, b: 80, l: 50, r: 20 },
        height: 400,
        legend: { orientation: 'h', y: 1.1 },
        xaxis: { tickangle: -45 },
        yaxis: { title: 'Total Growth Since 2000 (%)' }
    }, {responsive: true});
});
</script>
</body>
</html>
