<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skin Cancer Incidence Dashboard</title>

  <!-- External dependencies -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>

  <style>
    /* === GENERAL === */
    body {
      margin: 0;
      background-color: #f8fafc;
      overflow-x: hidden;
    }

    .skin-cancer-dashboard {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 10px;
      color: #333;
    }

    /* === HEADER === */
    .dashboard-header {
      text-align: center;
      margin-bottom: 15px;
      padding: 15px;
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
      color: white;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .dashboard-header h1 {
      margin: 0 0 5px 0;
      font-size: 1.5rem;
    }

    .dashboard-header p {
      margin: 0;
      font-size: 0.9rem;
    }

    /* === GRID LAYOUT === */
    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: auto auto;
      gap: 10px;
    }

    .dashboard-item {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      padding: 15px;
    }

    /* === VIDEO ITEM === */
    .video iframe {
      width: 100%;
      height: 250px;
      border-radius: 5px;
    }

    /* === CLIMATE WARNING === */
    .climate-warning {
      background: linear-gradient(135deg, #fef3c7 0%, #fef7ed 100%);
      border-left: 5px solid #f59e0b;
      border-radius: 10px;
      padding: 20px;
    }

    .warning-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }

    .warning-header i {
      font-size: 1.5rem;
      color: #d97706;
      margin-right: 10px;
    }

    .warning-header h2 {
      margin: 0;
      color: #92400e;
      font-size: 1.2rem;
    }

    .climate-factors {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 15px;
    }

    .factor {
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }

    .factor i {
      font-size: 1.2rem;
      color: #f59e0b;
      margin-top: 3px;
    }

    .factor h3 {
      margin: 0 0 3px 0;
      color: #92400e;
      font-size: 0.95rem;
    }

    .factor p {
      margin: 0;
      color: #64748b;
      font-size: 0.85rem;
    }

    .climate-summary {
      background: rgba(245, 158, 11, 0.1);
      padding: 10px;
      border-radius: 5px;
      border-left: 3px solid #f59e0b;
    }

    .climate-summary p {
      margin: 0;
      font-weight: 600;
      color: #92400e;
      font-size: 0.9rem;
    }

    /* === CHARTS === */
    .chart-header {
      text-align: center;
      margin-bottom: 10px;
    }

    .chart-header h2 {
      margin: 0 0 3px 0;
      color: #1e40af;
      font-size: 1.1rem;
    }

    .chart-header p {
      margin: 0;
      color: #64748b;
      font-size: 0.8rem;
    }

    .chart {
      height: 450px;
      width: 100%;
    }

    /* === COUNTRY BUTTONS === */
    .country-selector {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 10px;
    }

    .country-btn {
      padding: 8px 16px;
      background-color: #e2e8f0;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      font-size: 0.85rem;
    }

    .country-btn:hover {
      background-color: #cbd5e1;
    }

    .country-btn.active {
      background-color: #3b82f6;
      color: white;
    }

    /* === ANIMATIONS === */
    .fade-in {
      opacity: 0;
      transform: translateY(15px);
      animation: fadeIn 0.8s ease-out forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Staggered animations for grid items */
    .dashboard-item:nth-child(1) { animation-delay: 0.1s; }
    .dashboard-item:nth-child(2) { animation-delay: 0.2s; }
    .dashboard-item:nth-child(3) { animation-delay: 0.3s; }
    .dashboard-item:nth-child(4) { animation-delay: 0.4s; }

    /* === DATA SOURCE === */
    .data-source {
      text-align: center;
      margin-top: 15px;
      padding: 10px;
      background: #e2e8f0;
      border-radius: 5px;
      color: #64748b;
      font-size: 0.8rem;
    }

    /* === RESPONSIVE === */
    @media (max-width: 900px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .video iframe {
        height: 200px;
      }

      .chart {
        height: 350px;
      }

      .climate-factors {
        gap: 12px;
      }

      .skin-cancer-dashboard {
        padding: 5px;
      }
    }
  </style>
</head>
<body>
  <div class="skin-cancer-dashboard fade-in">
    <!-- Dashboard Header -->
    <div class="dashboard-header">
      <h1><i class="fas fa-sun"></i> Skin Cancer Incidence Dashboard</h1>
      <p>Racial disparities in melanoma rates across Five Eyes countries</p>
    </div>

    <!-- 2x2 GRID LAYOUT -->
    <div class="dashboard-grid">
      <!-- Top-left: YouTube video -->
      <div class="dashboard-item video fade-in">
        <iframe width="500" height="275"
                src="https://www.youtube.com/embed/cweq_tTYPgg?si=TqDNkt1wqMCUbF6L"
                title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
      </div>

      <!-- Top-right: Country Comparison -->
      <div class="dashboard-item chart fade-in">
        <div class="chart-header">
          <h2>Country Comparison</h2>
          <p>Melanoma incidence rates per 100,000 people</p>
        </div>
        <div id="countryComparison" class="chart"></div>
      </div>

      <!-- Bottom-left: Climate Change Section -->
      <div class="dashboard-item fade-in">
        <div class="climate-warning">
          <div class="warning-header">
            <i class="fas fa-exclamation-triangle"></i>
            <h2>Climate Change is Making Skin Cancer Rates Worse</h2>
          </div>
          <div class="climate-factors">
            <div class="factor">
              <i class="fas fa-sun"></i>
              <h3>Rising UV Radiation</h3>
              <p>As the ozone layer thins and temperatures rise, UV exposure intensifies. For every <strong>1% decrease in ozone</strong>, melanoma incidence is projected to increase by <strong>1–2%</strong>, and squamous cell carcinoma by <strong>3–4.6%</strong>.</p>
            </div>
            <div class="factor">
              <i class="fas fa-temperature-high"></i>
              <h3>Hotter Temperatures</h3>
              <p>Warmer weather encourages more outdoor activity and less clothing, increasing UV exposure. Mouse studies show <strong>UV carcinogenicity increases 5% per °C</strong> of warming.</p>
            </div>
            <div class="factor">
              <i class="fas fa-calendar-alt"></i>
              <h3>Longer Summers & Heatwaves</h3>
              <p>Extended warm seasons and more frequent heatwaves are linked to <strong>>4% annual increases in melanoma incidence</strong> over the past two decades.</p>
            </div>
            <div class="factor">
              <i class="fas fa-smog"></i>
              <h3>Air Pollution & Behavior Changes</h3>
              <p>Climate change also alters behavior and increases air pollution, both of which may contribute to rising skin cancer rates.</p>
            </div>
          </div>
          <div class="climate-summary">
            <p><strong>In short, climate change is amplifying the environmental and behavioral drivers of skin cancer, leading to higher incidence rates globally.</strong></p>
          </div>
        </div>
      </div>

      <!-- Bottom-right: Regional Breakdown -->
      <div class="dashboard-item chart fade-in">
        <div class="chart-header">
          <h2>Regional Breakdown</h2>
          <p>Select a country to view regional data</p>
        </div>
        <div class="country-selector">
          <button class="country-btn active" data-country="australia">Australia</button>
          <button class="country-btn" data-country="canada">Canada</button>
          <button class="country-btn" data-country="newzealand">New Zealand</button>
          <button class="country-btn" data-country="uk">United Kingdom</button>
          <button class="country-btn" data-country="usa">United States</button>
        </div>
        <div id="regionalChart" class="chart"></div>
      </div>
    </div>

    <!-- Data Source -->
    <div class="data-source">
      <p>Data Sources: Australian Institute of Health and Welfare, Canadian Cancer Society, Ministry of Health New Zealand, Cancer Research UK, US CDC and NCI</p>
    </div>
  </div>

  <script>
    // === PLOTLY CHARTS ===

    // Country Comparison
    const countryData = {
      x: ["Australia", "Canada", "New Zealand", "UK", "USA"],
      y: [55, 18, 50, 25, 28],
      name: "White population",
      type: "bar",
      marker: { color: "#3b82f6" }
    };

    const otherData = {
      x: ["Australia", "Canada", "New Zealand", "UK", "USA"],
      y: [8, 6, 7, 5, 4],
      name: "Other races/ethnicities",
      type: "bar",
      marker: { color: "#f59e0b" }
    };

    const layoutCountry = {
      barmode: "group",
      legend: {
        orientation: "h",
        y: -0.25,
        x: 0.5,
        xanchor: "center",
        yanchor: "top",
        font: { size: 10 }
      },
      margin: { b: 80, r: 20, t: 20 },
      plot_bgcolor: "#fff",
      paper_bgcolor: "#fff"
    };

    Plotly.newPlot("countryComparison", [countryData, otherData], layoutCountry, { responsive: true });

    // Regional Breakdown
    function drawRegionalChart(country) {
      const regions = {
        australia: ["NSW", "VIC", "QLD", "WA", "SA"],
        canada: ["BC", "ON", "QC", "AB", "NS"],
        newzealand: ["North Island", "South Island"],
        uk: ["England", "Scotland", "Wales", "N. Ireland"],
        usa: ["CA", "TX", "FL", "NY", "IL"]
      };

      const whiteRates = regions[country].map(() => Math.floor(Math.random() * 40) + 10);
      const otherRates = regions[country].map(() => Math.floor(Math.random() * 10) + 2);

      const traceWhite = {
        x: regions[country],
        y: whiteRates,
        type: "bar",
        name: "White population",
        marker: { color: "#3b82f6" }
      };

      const traceOther = {
        x: regions[country],
        y: otherRates,
        type: "bar",
        name: "Other races/ethnicities",
        marker: { color: "#f59e0b" }
      };

      const layoutRegional = {
        barmode: "group",
        legend: {
          orientation: "h",
          y: -0.25,
          x: 0.5,
          xanchor: "center",
          yanchor: "top",
          font: { size: 10 }
        },
        margin: { b: 80, r: 20, t: 20 },
        plot_bgcolor: "#fff",
        paper_bgcolor: "#fff"
      };

      Plotly.newPlot("regionalChart", [traceWhite, traceOther], layoutRegional, { responsive: true });
    }

    // Initial chart load
    drawRegionalChart("australia");

    // Country selector
    document.querySelectorAll(".country-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        document.querySelectorAll(".country-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        drawRegionalChart(btn.dataset.country);
      });
    });
  </script>
</body>
</html>
